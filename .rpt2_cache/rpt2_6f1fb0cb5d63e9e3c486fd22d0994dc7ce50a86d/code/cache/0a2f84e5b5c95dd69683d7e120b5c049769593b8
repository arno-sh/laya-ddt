{
  "code": "import { ui } from \"./../ui/layaMaxUI\";\r\nimport LogicManager from \"../LogicManager\";\r\nvar Event = Laya.Event;\r\nexport default class GameUI extends ui.test.TestSceneUI {\r\n    constructor() {\r\n        super();\r\n        this.allLables = new Array();\r\n        this.bestScore = 0;\r\n        LogicManager.game_ui = this;\r\n        this.box_combo.visible = false;\r\n        this.box_tower.visible = false;\r\n        this.allLables.push(this.lable_0);\r\n        this.allLables.push(this.lable_1);\r\n        this.allLables.push(this.lable_2);\r\n        this.allLables.push(this.lable_3);\r\n        this.allLables.push(this.lable_4);\r\n        this.allLables.push(this.lable_5);\r\n        this.allLables.push(this.lable_6);\r\n        this.allLables.push(this.lable_7);\r\n        this.allLables.push(this.lable_8);\r\n        this.allLables.push(this.lable_9);\r\n        this.allLables.forEach(element => {\r\n            element.text = \"\";\r\n        });\r\n        this.btn_start.on(Event.MOUSE_DOWN, this, this.OnStart);\r\n        this.OnRestart();\r\n    }\r\n    OnRestart() {\r\n        this.bestScore = GameUI.getLocalStorage(\"bestScore\", 0);\r\n        this.lblBestScore.text = \"\" + this.bestScore;\r\n    }\r\n    OnStart(e) {\r\n        e.stopPropagation();\r\n        this.box_start.visible = false;\r\n        this.lable_score.visible = true;\r\n        this.box_tower.visible = false;\r\n        LogicManager.getInstance().Init();\r\n    }\r\n    SetCombo(num) {\r\n        this.box_combo.visible = true;\r\n        this.box_combo.scaleX = 0;\r\n        this.box_combo.scaleY = 0;\r\n        if (num >= 100) {\r\n            let n1 = num % 10;\r\n            let n2 = Math.floor(num / 10) % 10;\r\n            let n3 = Math.floor(num / 100) % 10;\r\n            this.img_digtal_0.visible = true;\r\n            this.img_digtal_1.visible = true;\r\n            this.img_digtal_2.visible = true;\r\n            this.img_digtal_0.skin = \"comp/img_ddt_n\" + n3 + \".png\";\r\n            this.img_digtal_1.skin = \"comp/img_ddt_n\" + n2 + \".png\";\r\n            this.img_digtal_2.skin = \"comp/img_ddt_n\" + n1 + \".png\";\r\n        }\r\n        else if (num >= 10) {\r\n            let n1 = num % 10;\r\n            let n2 = Math.floor(num / 10) % 10;\r\n            this.img_digtal_0.visible = true;\r\n            this.img_digtal_1.visible = true;\r\n            this.img_digtal_2.visible = false;\r\n            this.img_digtal_0.skin = \"comp/img_ddt_n\" + n2 + \".png\";\r\n            this.img_digtal_1.skin = \"comp/img_ddt_n\" + n1 + \".png\";\r\n        }\r\n        else {\r\n            let n1 = num % 10;\r\n            this.img_digtal_0.visible = true;\r\n            this.img_digtal_1.visible = false;\r\n            this.img_digtal_2.visible = false;\r\n            this.img_digtal_0.skin = \"comp/img_ddt_n\" + n1 + \".png\";\r\n        }\r\n        Laya.Tween.to(this.box_combo, { scaleX: 1, scaleY: 1 }, 250, Laya.Ease.elasticOut, Laya.Handler.create(this, () => {\r\n            Laya.Tween.to(this.box_combo, { scaleX: 0, scaleY: 0 }, 250, Laya.Ease.linearInOut, Laya.Handler.create(this, () => {\r\n                this.box_combo.visible = false;\r\n            }), 100);\r\n        }));\r\n    }\r\n    ShowTowerName(score) {\r\n        this.box_tower.visible = true;\r\n        this.allLables.forEach(element => {\r\n            element.scaleX = 0;\r\n            element.scaleY = 0;\r\n            element.text = \"\";\r\n        });\r\n        let tower = \"香格里拉大酒店\";\r\n        if (score < 40) {\r\n            tower = \"香格里拉大酒店\";\r\n        }\r\n        else if (score < 80) {\r\n            tower = \"南京紫峰大厦\";\r\n        }\r\n        else if (score < 100) {\r\n            tower = \"长沙国际金融中心\";\r\n        }\r\n        else if (score < 120) {\r\n            tower = \"武汉绿地中心\";\r\n        }\r\n        else if (score < 140) {\r\n            tower = \"香港环球贸易广场\";\r\n        }\r\n        else if (score < 160) {\r\n            tower = \"上海环球金融中心\";\r\n        }\r\n        else if (score < 180) {\r\n            tower = \"台北101大厦\";\r\n        }\r\n        else if (score < 200) {\r\n            tower = \"北京中国尊\";\r\n        }\r\n        else if (score < 220) {\r\n            tower = \"广州周大福金融中心\";\r\n        }\r\n        else if (score < 240) {\r\n            tower = \"天津周大福滨海中心\";\r\n        }\r\n        else if (score < 260) {\r\n            tower = \"深圳平安国际金融中心\";\r\n        }\r\n        else if (score < 280) {\r\n            tower = \"天津117大厦\";\r\n        }\r\n        else {\r\n            tower = \"上海中心\";\r\n        }\r\n        if (score > this.bestScore) {\r\n            this.bestScore = score;\r\n            GameUI.setLocalStorage(\"bestScore\", score);\r\n        }\r\n        for (let i = 0; i < tower.length; ++i) {\r\n            this.allLables[i].text = tower[i];\r\n            Laya.Tween.to(this.allLables[i], { scaleX: 1, scaleY: 1 }, 500, Laya.Ease.sineOut, null, i * 300);\r\n        }\r\n    }\r\n    static getLocalStorage(key, def) {\r\n        var num = def;\r\n        var temp1 = Laya.LocalStorage.getItem(key);\r\n        if (temp1) {\r\n            if (isNaN(temp1)) {\r\n                num = def;\r\n                Laya.LocalStorage.setItem(key, num);\r\n            }\r\n            else {\r\n                num = parseInt(temp1);\r\n            }\r\n        }\r\n        else {\r\n            num = def;\r\n            Laya.LocalStorage.setItem(key, num);\r\n        }\r\n        return num;\r\n    }\r\n    static setLocalStorage(key, num) {\r\n        Laya.LocalStorage.setItem(key, num);\r\n    }\r\n}\r\n",
  "references": [
    "G:/work/laya/Project/ddt/laya-ddt/src/ui/layaMaxUI.ts",
    "G:/work/laya/Project/ddt/laya-ddt/src/LogicManager.ts"
  ]
}
