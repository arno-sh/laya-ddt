{
  "code": "import GameConfig from \"./GameConfig\";\r\nimport LogicManager from \"./LogicManager\";\r\nclass Main {\r\n    constructor() {\r\n        console.log(\"===1\");\r\n        let _config = new Config3D();\r\n        _config.isAntialias = true;\r\n        _config.isAlpha = false;\r\n        Laya3D.init(GameConfig.width, GameConfig.height, _config);\r\n        Laya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n        Laya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n        Laya.stage.scaleMode = GameConfig.scaleMode;\r\n        Laya.stage.screenMode = GameConfig.screenMode;\r\n        Laya.stage.alignV = GameConfig.alignV;\r\n        Laya.stage.alignH = GameConfig.alignH;\r\n        Laya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n        if (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\")\r\n            Laya.enableDebugPanel();\r\n        if (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"])\r\n            Laya[\"PhysicsDebugDraw\"].enable();\r\n        if (GameConfig.stat)\r\n            Laya.Stat.show();\r\n        Laya.alertGlobalError = true;\r\n        Laya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n    }\r\n    onVersionLoaded() {\r\n        Laya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onPreLoadFinish));\r\n    }\r\n    onPreLoadFinish() {\r\n        Laya.Scene3D.load(\"scene/LayaScene_SampleScene/Conventional/SampleScene.ls\", Laya.Handler.create(this, function (scene) {\r\n            LogicManager.scene = scene;\r\n            Laya.stage.addChild(scene);\r\n            console.log(\"--\" + Laya.stage.numChildren);\r\n            LogicManager.camera = scene.getChildByName(\"Main Camera\");\r\n            LogicManager.camera.clearFlag = Laya.BaseCamera.CLEARFLAG_DEPTHONLY;\r\n            LogicManager.bottomCube = scene.getChildByName(\"Cube\");\r\n            LogicManager.getInstance().top_box_color = new Laya.Vector4(Math.random(), Math.random(), Math.random(), 1);\r\n            let matBox = LogicManager.bottomCube.meshRenderer.material;\r\n            matBox.albedoColor = LogicManager.getInstance().top_box_color;\r\n            LogicManager.camera.removeAllLayers();\r\n            LogicManager.camera.addLayer(1);\r\n            LogicManager.bottomCube.layer = 1;\r\n            let BGCamera = scene.getChildByName(\"BGCamera\");\r\n            let Plane_1 = scene.getChildByName(\"Plane_1\");\r\n            let Plane_2 = scene.getChildByName(\"Plane_2\");\r\n            Plane_1.layer = 10;\r\n            Plane_2.layer = 10;\r\n            BGCamera.clearFlag = Laya.BaseCamera.CLEARFLAG_DEPTHONLY;\r\n            BGCamera.removeAllLayers();\r\n            BGCamera.addLayer(10);\r\n            let matP1 = new Laya.EffectMaterial();\r\n            Laya.Texture2D.load(\"bg/img_fyd_bg\" + LogicManager.randomNum(10) + \".jpg\", Laya.Handler.create(this, function (tex) {\r\n                matP1.texture = tex;\r\n            }));\r\n            matP1.colorA = 0.01;\r\n            Plane_1.meshRenderer.material = matP1;\r\n            LogicManager.getInstance().bg_front = matP1;\r\n            let matP2 = new Laya.BlinnPhongMaterial();\r\n            Laya.Texture2D.load(\"bg/img_fyd_bg\" + LogicManager.randomNum(10) + \".jpg\", Laya.Handler.create(this, function (tex) {\r\n                matP2.albedoTexture = tex;\r\n            }));\r\n            matP2.albedoColorA = 0.2;\r\n            Plane_2.meshRenderer.material = matP2;\r\n            LogicManager.getInstance().bg_black = matP2;\r\n            GameConfig.startScene && Laya.Scene.open(GameConfig.startScene, false);\r\n        }));\r\n    }\r\n}\r\nnew Main();\r\n",
  "references": [
    "G:/work/laya/Project/ddt/laya-ddt/src/GameConfig.ts",
    "G:/work/laya/Project/ddt/laya-ddt/src/LogicManager.ts"
  ]
}
