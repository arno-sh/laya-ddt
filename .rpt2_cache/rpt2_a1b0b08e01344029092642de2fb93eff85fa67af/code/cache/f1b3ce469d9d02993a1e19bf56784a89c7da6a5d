{
  "code": "export default class TweenExt {\r\n    static init() {\r\n        for (let key in TweenExt) {\r\n            if (key === \"init\")\r\n                continue;\r\n            laya.utils.Tween.prototype[key] = TweenExt[key];\r\n        }\r\n    }\r\n    static _initProps(target, props, isTo) {\r\n        for (let p in props) {\r\n            if ((typeof (target[p]) == 'number')) {\r\n                let start = isTo ? target[p] : props[p];\r\n                let end = isTo ? props[p] : target[p];\r\n                this[\"_props\"].push([p, start, end - start]);\r\n                if (!isTo)\r\n                    target[p] = start;\r\n            }\r\n            if (target[p] instanceof Laya.Vector4) {\r\n                let v4_lerp = new Laya.Vector4();\r\n                let v4_start = isTo ? target[p].clone() : props[p];\r\n                let v4_end = isTo ? props[p] : target[p].clone();\r\n                if (!(v4_start instanceof Laya.Vector4)) {\r\n                    v4_start = new Laya.Vector4(v4_start.x, v4_start.y, v4_start.z, v4_start.w);\r\n                }\r\n                v4_end = new Laya.Vector4(v4_end.x, v4_end.y, v4_end.z, v4_end.w);\r\n                Laya.Vector4.subtract(v4_end, v4_start, v4_lerp);\r\n                this[\"_props\"].push([p, v4_start, v4_lerp, v4_end]);\r\n                if (!isTo)\r\n                    target[p] = v4_start;\r\n            }\r\n            if (target.transform && target.transform[p] instanceof Laya.Vector3) {\r\n                let v3_lerp = new Laya.Vector3();\r\n                let v3_start = isTo ? target.transform[p].clone() : props[p];\r\n                let v3_end = isTo ? props[p] : target.transform[p].clone();\r\n                if (!(v3_start instanceof Laya.Vector3)) {\r\n                    v3_start = new Laya.Vector3(v3_start.x, v3_start.y, v3_start.z);\r\n                }\r\n                v3_end = new Laya.Vector3(v3_end.x, v3_end.y, v3_end.z);\r\n                Laya.Vector3.subtract(v3_end, v3_start, v3_lerp);\r\n                this[\"_props\"].push([p, v3_start, v3_lerp, v3_end]);\r\n                if (!isTo)\r\n                    target[p] = v3_start;\r\n            }\r\n        }\r\n    }\r\n    static _updateEase(time) {\r\n        var target = this[\"_target\"];\r\n        if (!target)\r\n            return;\r\n        if (target.destroyed)\r\n            return this[\"clearTween\"](target);\r\n        var usedTimer = this[\"_usedTimer\"] = time - this[\"_startTimer\"] - this[\"_delay\"];\r\n        if (usedTimer < 0)\r\n            return;\r\n        if (usedTimer >= this[\"_duration\"])\r\n            return this[\"complete\"]();\r\n        var ratio = usedTimer > 0 ? this[\"_ease\"](usedTimer, 0, 1, this[\"_duration\"]) : 0;\r\n        var props = this[\"_props\"];\r\n        for (var i = 0, n = props.length; i < n; i++) {\r\n            var prop = props[i];\r\n            if (typeof target[prop[0]] === \"number\") {\r\n                target[prop[0]] = prop[1] + (ratio * prop[2]);\r\n            }\r\n            if (target[prop[0]] instanceof Laya.Vector4) {\r\n                let x = prop[1].x + (ratio * prop[2].x);\r\n                let y = prop[1].y + (ratio * prop[2].y);\r\n                let z = prop[1].z + (ratio * prop[2].z);\r\n                let w = prop[1].w + (ratio * prop[2].w);\r\n                target[prop[0]] = new Laya.Vector4(x, y, z, w);\r\n            }\r\n            if (target[prop[0]] instanceof Laya.Vector3) {\r\n                let x = prop[1].x + (ratio * prop[2].x);\r\n                let y = prop[1].y + (ratio * prop[2].y);\r\n                let z = prop[1].z + (ratio * prop[2].z);\r\n                target[prop[0]] = new Laya.Vector3(x, y, z);\r\n            }\r\n            if (target.transform && target.transform[prop[0]] instanceof Laya.Vector3) {\r\n                let x = prop[1].x + (ratio * prop[2].x);\r\n                let y = prop[1].y + (ratio * prop[2].y);\r\n                let z = prop[1].z + (ratio * prop[2].z);\r\n                target.transform[prop[0]] = new Laya.Vector3(x, y, z);\r\n            }\r\n        }\r\n        if (this[\"update\"])\r\n            this[\"update\"].run();\r\n    }\r\n    static complete() {\r\n        if (!this[\"_target\"])\r\n            return;\r\n        Laya.timer.runTimer(this, this[\"firstStart\"]);\r\n        var handler = this[\"_complete\"];\r\n        this.completData();\r\n        if (this[\"update\"])\r\n            this[\"update\"].run();\r\n        this[\"_count\"]++;\r\n        if (this[\"repeat\"] != 0 && this[\"_count\"] >= this[\"repeat\"]) {\r\n            this[\"clear\"]();\r\n            handler && handler.run();\r\n        }\r\n        else {\r\n            this[\"restart\"]();\r\n        }\r\n    }\r\n    static completData() {\r\n        var target = this[\"_target\"];\r\n        var props = this[\"_props\"];\r\n        for (var i = 0, n = props.length; i < n; i++) {\r\n            var prop = props[i];\r\n            if (typeof target[prop[0]] === \"number\") {\r\n                target[prop[0]] = prop[1] + prop[2];\r\n            }\r\n            if (target[prop[0]] instanceof Laya.Vector4) {\r\n                target[prop[0]] = prop[3];\r\n            }\r\n            if (target[prop[0]] instanceof Laya.Vector3) {\r\n                target[prop[0]] = prop[3];\r\n            }\r\n            if (target.transform && target.transform[prop[0]] instanceof Laya.Vector3) {\r\n                target.transform[prop[0]] = prop[3];\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": []
}
